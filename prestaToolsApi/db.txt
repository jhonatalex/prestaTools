CREATE TABLE [User] (
	id int NOT NULL,
	name varchar NOT NULL,
	last_name varchar NOT NULL,
	password varchar NOT NULL,
	email varchar(255) NOT NULL UNIQUE,
	telephone varchar(255),
	address varchar(255),
	d_identidad varchar(255),
	date varchar(255),
	verify bit NOT NULL,
	type_user varchar(255),
  CONSTRAINT [PK_USER] PRIMARY KEY CLUSTERED
  (
  [email] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [Lender] (
	id int NOT NULL,
	d_identidad varchar(255) NOT NULL,
	name varchar(255) NOT NULL,
	last_name varchar(255) NOT NULL,
	password varchar(255) NOT NULL,
	email varchar(255) NOT NULL,
	telephone varchar(255) NOT NULL,
	address varchar(255) NOT NULL,
	number_bank varchar(255),
	balance_wallet varchar(255),
	date_up varchar(255),
  CONSTRAINT [PK_LENDER] PRIMARY KEY CLUSTERED
  (
  [email] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [Tool] (
	id int NOT NULL,
	name varchar(255) NOT NULL,
	reference varchar(255) NOT NULL,
	new bit,
	model varchar(255),
	description varchar(255),
	widgets bit,
	value_commercial decimal NOT NULL,
	value_rent decimal NOT NULL,
	year_buy int,
	weigt decimal,
	mesuare decimal,
	number_piece int,
	url_image varchar(255),
	url_image_2 varchar(255),
	url_image_3 varchar(255),
	terms_use varchar(255),
	break_downs varchar(255) NOT NULL,
	time_use decimal,
	id_category int NOT NULL,
	id_lenders varchar(255) NOT NULL,
	date_up varchar(255) NOT NULL,
	rate int,
  CONSTRAINT [PK_TOOL] PRIMARY KEY CLUSTERED
  (
  [id] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [Category] (
	id_cat int NOT NULL,
	title_cat varchar(255) NOT NULL,
	descrip_cat varchar(255) NOT NULL,
	url_imagen varchar(255) NOT NULL,
	url_imagen_banner varchar(255) NOT NULL,
  CONSTRAINT [PK_CATEGORY] PRIMARY KEY CLUSTERED
  (
  [id_cat] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [Venta] (
	id_venta int NOT NULL,
	type_comprobante varchar(255),
	number_comprobante varchar(255),
	id_user varchar(255) NOT NULL,
	date varchar(255),
	state bit NOT NULL,
  CONSTRAINT [PK_VENTA] PRIMARY KEY CLUSTERED
  (
  [id_venta] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [Detalle_venta] (
	id_detalle_venta int NOT NULL,
	id_venta int NOT NULL,
	id_tool int NOT NULL,
	amount decimal NOT NULL,
	date varchar(255) NOT NULL,
	price decimal NOT NULL,
	descuento decimal NOT NULL,
	total int NOT NULL,
  CONSTRAINT [PK_DETALLE_VENTA] PRIMARY KEY CLUSTERED
  (
  [id_detalle_venta] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO


ALTER TABLE [Tool] WITH CHECK ADD CONSTRAINT [Tool_fk0] FOREIGN KEY ([id_category]) REFERENCES [Category]([id_cat])
ON UPDATE CASCADE
GO
ALTER TABLE [Tool] CHECK CONSTRAINT [Tool_fk0]
GO
ALTER TABLE [Tool] WITH CHECK ADD CONSTRAINT [Tool_fk1] FOREIGN KEY ([id_lenders]) REFERENCES [Lender]([email])
ON UPDATE CASCADE
GO
ALTER TABLE [Tool] CHECK CONSTRAINT [Tool_fk1]
GO


ALTER TABLE [Venta] WITH CHECK ADD CONSTRAINT [Venta_fk0] FOREIGN KEY ([id_user]) REFERENCES [User]([email])
ON UPDATE CASCADE
GO
ALTER TABLE [Venta] CHECK CONSTRAINT [Venta_fk0]
GO

ALTER TABLE [Detalle_venta] WITH CHECK ADD CONSTRAINT [Detalle_venta_fk0] FOREIGN KEY ([id_venta]) REFERENCES [Venta]([id_venta])
ON UPDATE CASCADE
GO
ALTER TABLE [Detalle_venta] CHECK CONSTRAINT [Detalle_venta_fk0]
GO
ALTER TABLE [Detalle_venta] WITH CHECK ADD CONSTRAINT [Detalle_venta_fk1] FOREIGN KEY ([id_tool]) REFERENCES [Tool]([id])
ON UPDATE CASCADE
GO
ALTER TABLE [Detalle_venta] CHECK CONSTRAINT [Detalle_venta_fk1]
GO